<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skapa kortlek</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="creator.css">
</head>
<body>
    <a href="index.html" class="back-link">‚Üê Tillbaka</a>
    <h1 id="page-title">Creator</h1>
    <p class="subtitle" id="creator-subtitle">Logga in f√∂r att hantera kortlekar</p>

    <!-- Creator login modal -->
    <div class="modal-overlay active" id="login-modal">
        <div class="modal">
            <h3>Logga in som creator</h3>
            <div class="form-group">
                <label for="creator-email-input">E-post</label>
                <input type="email" id="creator-email-input" placeholder="Din e-postadress">
            </div>
            <div class="form-group">
                <label for="creator-password-input">L√∂senord</label>
                <input type="password" id="creator-password-input" placeholder="Ditt l√∂senord">
            </div>
            <div class="modal-buttons">
                <a href="index.html" class="modal-btn secondary">Avbryt</a>
                <button class="modal-btn primary" onclick="loginCreator()">Logga in</button>
            </div>
        </div>
    </div>

    <!-- Creator dashboard (hidden until authenticated) -->
    <div class="creator-dashboard" id="creator-dashboard" style="display: none;">

        <!-- My decks section -->
        <div class="form-card">
            <div class="logged-in-as">
                Inloggad som: <strong id="logged-in-name"></strong>
                <button class="btn-logout" onclick="logoutCreator()">Logga ut</button>
            </div>

            <div class="section-header">
                <h2>Mina kortlekar</h2>
                <button class="btn-add" onclick="showCreateForm()">+ Ny kortlek</button>
            </div>

            <div class="my-decks-list" id="my-decks-list">
                <p class="loading">Laddar...</p>
            </div>
        </div>

        <!-- Create/Edit deck form (hidden by default) -->
        <div class="form-card" id="deck-form-card" style="display: none;">
            <h2 id="deck-form-title">Ny kortlek</h2>

            <div class="form-group" id="deck-id-group">
                <label for="deck-id-input">ID (anv√§nds i URL)</label>
                <input type="text" id="deck-id-input" placeholder="t.ex. minlek">
            </div>

            <div class="form-group">
                <label for="deck-name-input">Namn</label>
                <input type="text" id="deck-name-input" placeholder="Kortlekens namn">
            </div>

            <div class="form-group">
                <label for="deck-subtitle-input">Undertitel (valfritt)</label>
                <input type="text" id="deck-subtitle-input" placeholder="En kort beskrivning">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="deck-icon-input">Ikon</label>
                    <input type="text" id="deck-icon-input" placeholder="üÉè" value="üÉè">
                </div>

                <div class="form-group">
                    <label for="deck-color-input">Bakgrund</label>
                    <input type="color" id="deck-color-input" value="#669e6a">
                </div>

                <div class="form-group">
                    <label for="deck-textcolor-input">Text</label>
                    <input type="color" id="deck-textcolor-input" value="#ffffff">
                </div>

                <div class="form-group">
                    <label for="deck-public-input">Publik</label>
                    <input type="checkbox" id="deck-public-input" checked>
                </div>
            </div>

            <div class="form-group">
                <label>Kort</label>
                <div class="cards-table-container">
                    <table class="cards-table" id="cards-table">
                        <thead>
                            <tr>
                                <th>Kategori</th>
                                <th>Ikon</th>
                                <th>Titel</th>
                                <th>Beskrivning</th>
                                <th>Tips</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="cards-table-body">
                        </tbody>
                    </table>
                </div>
                <button type="button" class="btn-add-row" onclick="addCardRow()">+ L√§gg till kort</button>
            </div>

            <div class="form-group">
                <label for="deck-csv-input">Importera fr√•n CSV (ers√§tter tabellen)</label>
                <input type="file" id="deck-csv-input" accept=".csv">
                <p class="form-hint">Format: category,icon,title,description,tip</p>
            </div>

            <div class="form-actions">
                <button class="modal-btn secondary" onclick="hideCreateForm()">Avbryt</button>
                <button class="modal-btn primary" onclick="saveDeck()" id="save-deck-btn">Skapa kortlek</button>
            </div>
        </div>
    </div>

    <!-- Modal for confirming deletion -->
    <div class="modal-overlay" id="delete-deck-modal">
        <div class="modal">
            <h3>Ta bort kortlek</h3>
            <p style="color: #666; margin-bottom: 15px;" id="delete-deck-text"></p>
            <div class="modal-buttons">
                <button class="modal-btn secondary" onclick="closeDeleteDeckModal()">Avbryt</button>
                <button class="modal-btn danger" onclick="confirmDeleteDeck()">Ta bort</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-functions-compat.js"></script>

    <!-- App scripts -->
    <script src="firebase-config.js"></script>
    <script src="creator.js"></script>
</body>
</html>
